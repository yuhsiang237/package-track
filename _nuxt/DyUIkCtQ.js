function u(n){try{const e=JSON.parse(n);return n=JSON.stringify(e,null,2),n}catch{return console.warn("⚠️ JSON 格式有誤，無法自動排版"),n}}function p(n){const e=new Date(n),t=new Date,o=1e3*60*60*24,c=t.getTime()-e.getTime();return Math.floor(c/o)}function g(n){try{const e=JSON.parse(n);return JSON.stringify(e,null,2)}catch{return console.warn("⚠️ JSON 格式有誤，無法自動排版"),null}}function y(n){try{const e=new Date,t=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),c=String(e.getDate()).padStart(2,"0"),a=`package_track_${`${t}${o}${c}`}.json`,r=u(n),s=new Blob([r],{type:"application/json"}),d=URL.createObjectURL(s),l=document.createElement("a");l.href=d,l.download=a,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(d),console.log(`成功下載檔案: ${a}`)}catch(e){console.error("下載檔案失敗:",e)}}async function S(n){if(!n)return null;if(!n.name.endsWith(".json"))return console.warn("⚠️ 請選擇 JSON 檔案"),null;try{const e=await n.text(),t=JSON.parse(e),o=t.dependencies||{},c=t.devDependencies||{},i={},a=r=>r.replace(/^[\^~><=]+/,"");return Object.entries(o).forEach(([r,s])=>{i[r]=a(String(s))}),Object.entries(c).forEach(([r,s])=>{i[r]=a(String(s))}),i}catch(e){return console.error("解析 package.json 失敗:",e),null}}export{p as daysAgo,y as downloadUserData,u as formatTextareaJson,S as handlePackageJsonUpload,g as toPrettyJSONString};
